{% extends "base.html" %}
{% load static %}

{% block title %}Home - To Do App{% endblock %}

{% block content %}
<link rel="stylesheet" type="text/css" href="{% static 'css/home.css' %}">

<div class="container text-center">
    {% if user.is_authenticated %}
        <h1>Welcome back, {{ user.username }}!</h1>
        <p class="home-subtitle">
            Ready to organize your day?
        </p>

        <div class="card task-card">
            <h3>Your Tasks</h3>

            {% if tasks %}
                <ul class="task-list">
                    {% for task in tasks %}
                        <li class="task-item {% if task.completed %}completed{% endif %}">
                            <div class="task-item-content">
                                <div class="task-item-text">
                                    <h4 class="task-item-title {% if task.completed %}completed{% endif %}">
                                        {{ task.title }}
                                    </h4>
                                    {% if task.description %}
                                        <p class="task-item-description">
                                            {{ task.description }}
                                        </p>
                                    {% endif %}
                                    <small class="task-item-date">
                                        Created: {{ task.created_at|date:"M d, Y, h:i" }}
                                    </small>
                                </div>
                                <div class="task-item-actions">
                                    <span class="task-status-badge {% if task.completed %}completed{% else %}pending{% endif %}">
                                        {% if task.completed %}âœ“ Done{% else %}Pending{% endif %}
                                    </span>
                                    {# Edit button with task.pk (primary key) passed to URL #}
                                    {# {% url 'task_update' task.pk %} generates: /tasks/5/edit/ #}
                                    <a href="{% url 'task_update' task.pk %}" class="task-edit-btn">âœï¸ Edit</a>
                                    <a href="{% url 'task_delete' task.pk %}" class="task-delete-btn">ğŸ—‘ï¸ Delete</a>
                                </div>
                            </div>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="empty-tasks-message">
                    You haven't created any tasks yet. Start adding tasks to stay productive!
                </p>
            {% endif %}

            <a href="{% url 'task_create' %}" class="btn mt-2">
                âœ“ Add New Task
            </a>
        </div>

    {% else %}
        <h1>Organize Your Life</h1>
        <p class="home-subtitle">
            A simple and elegant way to manage your tasks
        </p>

        <div class="home-cta">
            <a href="{% url 'signup' %}" class="btn">Get Started</a>
            <a href="{% url 'login' %}" class="btn btn-secondary">Login</a>
        </div>

        <div class="card features-card">
            <h3>Why To Do App?</h3>
            <ul class="features-list">
                <li>âœ“ Simple and intuitive interface</li>
                <li>âœ“ Stay organized and productive</li>
                <li>âœ“ Access your tasks anywhere</li>
            </ul>
        </div>
    {% endif %}
</div>
{% endblock %}